<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        //OBJETOS JS
        /* const nuevoObjeto = {}; */

        //Key:VALOR
        //KEY -> ES EL INDENTIFICADOR OSEA EL INDICE 
        //VALOR -> ES EL VALOR QUE QUEREMOS GUARDAR EN ESA CLAVE

        /* const user = {
            name: 'Miguel',
            password: '1234567',
            lovesJavascript: true,
            favoriteNumber: 69
        }; */

        //Acceder a los valores
        //Podemos acceder a los valores de un objeto llamando al nombe del objeto y la clave. hay 2 formas
        /* user.lovesJavascript;
        user.name;

        const passString = "passwod";
        user['lovesJavascript'];
        user['name'];
        user[passString]; */

        //Asignacion de valores
        //Asignar valores funcionan igual que acceder a ellos. podemos asignarlos cuando creamos el objeto, con notacion de puntos o con notacion de corchetes:
        const nuevoUsuario = {
            esNuevo : true
        };
        const losveString = 'LovesJavascript';

        nuevoUsuario.username = 'Otro.nombre.de.usuario';
        nuevoUsuario['password'] = '12345';
        nuevoUsuario[losveString] = true;

        //Eliminar propiedades -> si queremos eliminar una propiedad podemos hacerlo con la plabra clave delte:
        /* const nuevoObejto = {
            eliminarPropiedad : true
        };

        delete nuevoObejto.eliminarPropiedad; */

        //METODOS
        //En los objetos, los valores se pueden establecer en funciones, las funciones guardadas en un objeto se denominan metodos.
        //NOTA: podemos llamar a un metodo con argumentos como lo hariamos con una funcion normal
        /* const nuevoObejto = {
            decirHola: function(){
                console.log("Hola a todos");
            }
        };

        nuevoObejto.decirHola(); //Hola a todos */

        //Bucles FOR IN
        //Los objetos no contienen indices numericos, por lo que el bucle estandar (for) no funcionara. Js Tiene  un segundo tipo de bucle llamado for in es una sintaxis ligeramente diferente, comienza igual pero entre parentesis declaramos una variable, la palabra clave in y el nombre del objeto.
        /* const usuario = {
            username: 'mangel',
            password: '12345678910',
            losveJavascript: true,
            favoriteNumber: 69
        };

        for (const key in usuario) {
            //variable in //nombre del objeto
            console.log(key+" : " +usuario[key]);
        } */

        //La palabra clave THIS
        //Los objetos tiene una palaba calve autoreferencial que se puede aplicar a cada objeto llamado THIS. cuando se llama dentro de un objeto se refiere a ese mismo objeto. THIS puede usarse para acceder  a otras claves en el mismo objeto.
        /* const usuario = {
            username: 'Mangel',
            password: '12345678910',
            losveJavascript: true,
            favoriteNumber: 69,
            decirHola: function(){
                console.log(this.username + ' manda saludos')
            }
        };

        usuario.decirHola(); //mangel manda saludos */

        //NOTA: la palabra this a veces puede ser uno de los temas mas dificiles en JS. los estamos usando basicamente aqui, pero el tema se vuelve mucho mas complejo pronto.

        //THIS y el Execution context
        //contest global inicial -> cuando ejecutamos el codigo por fuera de cualquier funcion. En este caso this hace refeencia al objeto global.
        //En este caso this hace referencia al objeto global, en el caso del browser hace referencia a window.
        /* console.log(this === window); //true
        this.a = 37;
        console.log(window.a); //37 */

        //En el contexto de una funcion
        //cuando estamos dentro de una funcion, el valor de this va a depender de como sea invocada la funcion.
        /* function f1(){
            return  this;
        }

        f1()===window; //true

        window.f1() === window; //true */

        //Como metodo de un objeto
        //cuando usamos el keywod this dentro de una funcion que es un metodo de un objeto, this hace referencia al objeto sobre el cual se llamo el metodo.
        /* var o = {
            prop: 37,
            f: function(){
                return this.prop;
            }
        };

        console.log(o.f()); //37 */

        //En este caso no depende donde hayamos definido la funcion, lo unico que importa es que la funcion haya sido invocada como metodo de un objeto.
        var o = {prop: 37};

        function loguea(){
            return this.prop;
        }

        o.f = loguea;

        //console.log(o.f()); //El resultado es el mismo

        //De todas maneras debemos tener cuidado con el keyword this, ya que pueden apareces casos donde es contra intuitivo.

        /* var obj = {
            nombre : 'objeto',
            log: function(){
                this.nombre = 'Cambiado'; //this hace referencia a este objeto, a 'obj'
                console.log(this) //obj

                var cambia = function(str){
                    this.nombre = str; //uno esperaria que this sea 'obj'
                }

                cambia('Holaa!!!');
                console.log(this);
            }
        }; */

        //Ejmplo anterior mejorado
        var obj = {
            nombre : 'objeto',
            log: function(){
                this.nombre = 'Cambiado'; //this hace referencia a este objeto, a 'obj'
                console.log(this) //obj

                var that = this;//guardo la referencia a this

                var cambia = function(str){
                    that.nombre = str; //uso la referencia dentro de una funcion
                }

                cambia('Holaa!!!');
                console.log(this);
            }
        };


        //HOMEWORK
        
        function crearGato (nombre, edad) {
            // Crear un nuevo objeto con la propiedad "nombre" y el valor definido como el argumento "nombre".
            // Agrega una propiedad al objeto con el nombre "edad" y usa el valor definido en el argumento "edad"
            // Agrega un método (funcion) llamado "meow" que devuelva el string "Meow!"
            // Devuelve el objeto
            // Tu código:
            var obj = {
                nombre: nombre,
                edad: edad,
                meow: function(){
                    return "Meow!"
                }
            };
            return obj;
        }

        function agregarPropiedad (objeto, property) {
            // Agrega una propiedad al objeto (argumento "objeto") con el valor `null`
            // Devuelve el objeto
            // NOTA: El nombre de la propiedad no es "propiedad", el nombre es el valor del argumento llamado "property" (una cadena/string)
            // Tu código:
            objeto[property] = null;
            return objeto;
        }

        // "usuarios" es un array de objetos "usuario"
        // Cada objeto "usuario" tiene la propiedad "esPremium"
        // Define cada propiedad "esPremium" de cada objeto como "true"
        // Devuelve el array de usuarios
        // Tu código:

        var usuarios = [
            { esPremium: false },
            { esPremium: false },
            { esPremium: false },
            { esPremium: false },
            { esPremium: false },
        ]

        /* for(key in usuarios){
            usuarios[key].esPremium = true;
            //console.log(key, usuarios[key].esPremium = true);
        }
        console.log(usuarios); */

        // "usuario" tiene una propiedad llamada "posts" que es un array
        // "posts" es un array de objetos "post"
        // Cada objeto "post" tiene una propiedad llamada "likes" que es un entero (int/integer)
        // Suma todos los likes de todos los objetos "post"
        // Devuelve la suma
        // Tu código:

        var usuario = {
            post:[
                {
                id: '1',
                title: 'Aventuras en JS!',
                likes: 10
                },
                {
                id: '2',
                title: 'Soy Henry!',
                likes: 100
                },
                {
                id: '3',
                title: 'Qué es un JavaScript?',
                likes: 35
                },
                {
                id: '4',
                title: 'JS Objects for Dummies',
                likes: 42
                },
                {
                id: '5',
                title: 'Educación online',
                likes: 99
                },
            ],
        };

        /* var total = 0;
        for(let key in usuario.post){
            console.log(key, usuario.post[key].likes);
            //total = usuario.post[key].likes + total;
        }
        console.log(total); */

        // Agregar un método (función) al objeto "producto" llamado "calcularPrecioDescuento"
        // Este método debe multiplicar el "precio" del "producto" ("producto.precio" o "producto[precio]") y "porcentajeDeDescuento" para obtener el descuento
        // El método resta el descuento del precio y devuelve el precio con descuento
        // Devuelve el objeto "producto" al final de la función
        // Ejemplo:
        // producto.precio -> 20
        // producto.porcentajeDeDescuento -> 0.2 (o simplemente ".2")
        // producto.calcularPrecioDescuento() -> 20 - (20 * 0.2)
        // Tu código:
        var producto = {
            precio: 20,
            porcentajeDeDescuento: 0.2,
            calcularPrecioDescuento: function(){
                this.precio = this.precio - (this.precio * this.porcentajeDeDescuento);

            }
        };
    </script>
</body>
</html>